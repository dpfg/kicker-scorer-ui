var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('angular2/core');
var game_1 = require('../../models/game');
var player_selector_1 = require('../player-selector/player_selector');
var match_service_1 = require('../../services/match_service');
var NewGameComponent = (function () {
    function NewGameComponent(matchService) {
        this.matchService = matchService;
        this.blue_team = new game_1.Team();
        this.red_team = new game_1.Team();
    }
    NewGameComponent.prototype.isValidTeamSetup = function () {
        return this.isTeamNotEmpty(this.blue_team) && this.isTeamNotEmpty(this.red_team);
    };
    NewGameComponent.prototype.isTeamNotEmpty = function (team) {
        return team != null && team.isComplete();
    };
    NewGameComponent.prototype.getUserPicPlaceholder = function () {
        return "https://placeholdit.imgix.net/~text?txtsize=33&txt=350Ã—150&w=40&h=40";
    };
    NewGameComponent.prototype.select = function (team, pl) {
        console.log('select: ' + team + ", pl: " + pl);
        this.toSelectTeam = team;
        this.toSelectPlayer = pl;
    };
    NewGameComponent.prototype.setPlayer = function (event) {
        if (this.toSelectPlayer == 0) {
            this.toSelectTeam.goalkeeper = event;
        }
        else {
            this.toSelectTeam.forward = event;
        }
        console.log(event);
    };
    NewGameComponent.prototype.startMatch = function () {
        console.log("start match");
        this.matchService
            .createMatch(this.blue_team, this.red_team)
            .subscribe(this.onMatchStarted, this.onError, this.onError);
    };
    NewGameComponent.prototype.onMatchStarted = function (d) {
        console.log(d);
    };
    NewGameComponent.prototype.onError = function () {
        console.log("error");
    };
    NewGameComponent = __decorate([
        core_1.Component({
            selector: 'new-game'
        }),
        core_1.View({
            template: "\n      <div class=\"row\">\n        <player-selector elementId=\"playerSelector\" (selected)=\"setPlayer($event)\"></player-selector>\n        <div class=\"col-sm-6 col-sm-offset-3\">\n          <form>\n            <h4>Blue Team</h4>\n            <div class=\"list-group\">\n              <a href=\"#\" data-toggle=\"modal\" data-target=\"#playerSelector\" class=\"list-group-item userpic-container\" (click)='select(blue_team, 0)'>\n                <img src=\"{{ getUserPicPlaceholder() }}\" class=\"img-responsive\" alt=\"Blue Team goalkeeper's avatar\">\n                <h5 class=\"list-group-item-heading\">Goalkeeper</h5>\n                <p class=\"list-group-item-text\" *ngIf='blue_team.goalkeeper'>\n                  {{blue_team.goalkeeper.username}}\n                </p>\n                <p class=\"list-group-item-text text-danger\" *ngIf=\"!blue_team || !blue_team.goalkeeper\">None</p>\n              </a>\n              <a href=\"#\" data-toggle=\"modal\" data-target=\"#playerSelector\" class=\"list-group-item userpic-container\" (click)='select(blue_team, 1)'>\n                <img src=\"{{ getUserPicPlaceholder() }}\" class=\"img-responsive\" alt=\"Blue Team forward's avatar\">\n                <h5 class=\"list-group-item-heading\">Forward</h5>\n                <p class=\"list-group-item-text\" *ngIf=\"blue_team.forward\">\n                  {{blue_team.forward.username}}\n                </p>\n                <p class=\"list-group-item-text text-danger\" *ngIf=\"!blue_team || !blue_team.forward\">None</p>\n              </a>\n            </div>\n            <h4>Red Team</h4>\n            <div class=\"list-group\">\n              <a href=\"#\" data-toggle=\"modal\" data-target=\"#playerSelector\" class=\"list-group-item userpic-container\" (click)='select(red_team, 0)'>\n                <img src=\"{{ getUserPicPlaceholder() }}\" class=\"img-responsive\" alt=\"Red Team goalkeeper's avatar\">\n                <h5 class=\"list-group-item-heading\">Goalkeeper</h5>\n                <p class=\"list-group-item-text\" *ngIf=\"red_team.goalkeeper\">\n                  {{red_team.goalkeeper.username}}\n                </p>\n                <p class=\"list-group-item-text text-danger\" *ngIf=\"!red_team || !red_team.goalkeeper\">None</p>\n              </a>\n              <a href=\"#\" data-toggle=\"modal\" data-target=\"#playerSelector\" class=\"list-group-item userpic-container\" (click)='select(red_team, 1)'>\n                <img src=\"{{ getUserPicPlaceholder() }}\" class=\"img-responsive\" alt=\"Red Team forward's avatar\">\n                <h5 class=\"list-group-item-heading\">Forward</h5>\n                <p class=\"list-group-item-text\" *ngIf=\"red_team.forward\">\n                  {{red_team.forward.username}}\n                </p>\n                <p class=\"list-group-item-text text-danger\" *ngIf=\"!red_team || !red_team.forward\">None</p>\n              </a>\n            </div>\n            <button type=\"button\" class=\"btn btn-primary btn-block\"\n              [disabled]=\"!isValidTeamSetup()\"\n              (click)=\"startMatch()\">Start Match</button>\n          </form>\n        </div>\n      </div>\n    ",
            styles: ["\n      .userpic-container {\n        min-height: 60px;\n      }\n\n      .userpic-container img {\n        position: absolute;\n        right: 10px;\n        width: 40px;\n        height: 40px;\n      }\n\n      .list-group-item {\n        outline-width: 0;\n      }\n    "],
            directives: [player_selector_1.PlayerSelectorComponent]
        }), 
        __metadata('design:paramtypes', [match_service_1.MatchService])
    ], NewGameComponent);
    return NewGameComponent;
})();
exports.NewGameComponent = NewGameComponent;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvbmV3LWdhbWUvbmV3X2dhbWUudHMiXSwibmFtZXMiOlsiTmV3R2FtZUNvbXBvbmVudCIsIk5ld0dhbWVDb21wb25lbnQuY29uc3RydWN0b3IiLCJOZXdHYW1lQ29tcG9uZW50LmlzVmFsaWRUZWFtU2V0dXAiLCJOZXdHYW1lQ29tcG9uZW50LmlzVGVhbU5vdEVtcHR5IiwiTmV3R2FtZUNvbXBvbmVudC5nZXRVc2VyUGljUGxhY2Vob2xkZXIiLCJOZXdHYW1lQ29tcG9uZW50LnNlbGVjdCIsIk5ld0dhbWVDb21wb25lbnQuc2V0UGxheWVyIiwiTmV3R2FtZUNvbXBvbmVudC5zdGFydE1hdGNoIiwiTmV3R2FtZUNvbXBvbmVudC5vbk1hdGNoU3RhcnRlZCIsIk5ld0dhbWVDb21wb25lbnQub25FcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEscUJBQXFDLGVBQWUsQ0FBQyxDQUFBO0FBQ3JELHFCQUFrQyxtQkFBbUIsQ0FBQyxDQUFBO0FBRXRELGdDQUFzQyxvQ0FBb0MsQ0FBQyxDQUFBO0FBQzNFLDhCQUEyQiw4QkFBOEIsQ0FBQyxDQUFBO0FBRTFEO0lBK0VJQSwwQkFBb0JBLFlBQTBCQTtRQUExQkMsaUJBQVlBLEdBQVpBLFlBQVlBLENBQWNBO1FBQzFDQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxJQUFJQSxXQUFJQSxFQUFFQSxDQUFDQTtRQUM1QkEsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsSUFBSUEsV0FBSUEsRUFBRUEsQ0FBQ0E7SUFDL0JBLENBQUNBO0lBRURELDJDQUFnQkEsR0FBaEJBO1FBQ0lFLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLElBQUlBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUFBO0lBQ3BGQSxDQUFDQTtJQUVPRix5Q0FBY0EsR0FBdEJBLFVBQXVCQSxJQUFVQTtRQUM3QkcsTUFBTUEsQ0FBQ0EsSUFBSUEsSUFBSUEsSUFBSUEsSUFBSUEsSUFBSUEsQ0FBQ0EsVUFBVUEsRUFBRUEsQ0FBQ0E7SUFDN0NBLENBQUNBO0lBRURILGdEQUFxQkEsR0FBckJBO1FBQ0lJLE1BQU1BLENBQUNBLHNFQUFzRUEsQ0FBQ0E7SUFDbEZBLENBQUNBO0lBRURKLGlDQUFNQSxHQUFOQSxVQUFPQSxJQUFVQSxFQUFFQSxFQUFVQTtRQUN6QkssT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBVUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FBR0EsRUFBRUEsQ0FBQ0EsQ0FBQ0E7UUFDL0NBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLElBQUlBLENBQUNBO1FBQ3pCQSxJQUFJQSxDQUFDQSxjQUFjQSxHQUFHQSxFQUFFQSxDQUFDQTtJQUM3QkEsQ0FBQ0E7SUFFREwsb0NBQVNBLEdBQVRBLFVBQVVBLEtBQUtBO1FBQ1hNLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzNCQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxVQUFVQSxHQUFHQSxLQUFLQSxDQUFDQTtRQUN6Q0EsQ0FBQ0E7UUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDSkEsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsT0FBT0EsR0FBR0EsS0FBS0EsQ0FBQ0E7UUFDdENBLENBQUNBO1FBQ0RBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO0lBQ3ZCQSxDQUFDQTtJQUVETixxQ0FBVUEsR0FBVkE7UUFDSU8sT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0E7UUFDM0JBLElBQUlBLENBQUNBLFlBQVlBO2FBQ1pBLFdBQVdBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLEVBQUVBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBO2FBQzFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxjQUFjQSxFQUFFQSxJQUFJQSxDQUFDQSxPQUFPQSxFQUFFQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQTtJQUNwRUEsQ0FBQ0E7SUFFRFAseUNBQWNBLEdBQWRBLFVBQWVBLENBQVFBO1FBQ25CUSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUNuQkEsQ0FBQ0E7SUFFRFIsa0NBQU9BLEdBQVBBO1FBQ0lTLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBO0lBQ3pCQSxDQUFDQTtJQTVITFQ7UUFBQ0EsZ0JBQVNBLENBQUNBO1lBQ1BBLFFBQVFBLEVBQUVBLFVBQVVBO1NBQ3ZCQSxDQUFDQTtRQUNEQSxXQUFJQSxDQUFDQTtZQUNGQSxRQUFRQSxFQUFFQSw4bUdBaURUQTtZQUNEQSxNQUFNQSxFQUFFQSxDQUFDQSxtUkFlUkEsQ0FBQ0E7WUFDRkEsVUFBVUEsRUFBRUEsQ0FBQ0EseUNBQXVCQSxDQUFDQTtTQUN4Q0EsQ0FBQ0E7O3lCQXNEREE7SUFBREEsdUJBQUNBO0FBQURBLENBN0hBLEFBNkhDQSxJQUFBO0FBckRZLHdCQUFnQixtQkFxRDVCLENBQUEiLCJmaWxlIjoiY29tcG9uZW50cy9uZXctZ2FtZS9uZXdfZ2FtZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBWaWV3LCBJbnB1dH0gZnJvbSAnYW5ndWxhcjIvY29yZSc7XG5pbXBvcnQge1BsYXllciwgVGVhbSwgTWF0Y2h9IGZyb20gJy4uLy4uL21vZGVscy9nYW1lJztcblxuaW1wb3J0IHtQbGF5ZXJTZWxlY3RvckNvbXBvbmVudH0gZnJvbSAnLi4vcGxheWVyLXNlbGVjdG9yL3BsYXllcl9zZWxlY3Rvcic7XG5pbXBvcnQge01hdGNoU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvbWF0Y2hfc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnbmV3LWdhbWUnXG59KVxuQFZpZXcoe1xuICAgIHRlbXBsYXRlOiBgXG4gICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgIDxwbGF5ZXItc2VsZWN0b3IgZWxlbWVudElkPVwicGxheWVyU2VsZWN0b3JcIiAoc2VsZWN0ZWQpPVwic2V0UGxheWVyKCRldmVudClcIj48L3BsYXllci1zZWxlY3Rvcj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02IGNvbC1zbS1vZmZzZXQtM1wiPlxuICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgPGg0PkJsdWUgVGVhbTwvaDQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdC1ncm91cFwiPlxuICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGRhdGEtdG9nZ2xlPVwibW9kYWxcIiBkYXRhLXRhcmdldD1cIiNwbGF5ZXJTZWxlY3RvclwiIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIHVzZXJwaWMtY29udGFpbmVyXCIgKGNsaWNrKT0nc2VsZWN0KGJsdWVfdGVhbSwgMCknPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwie3sgZ2V0VXNlclBpY1BsYWNlaG9sZGVyKCkgfX1cIiBjbGFzcz1cImltZy1yZXNwb25zaXZlXCIgYWx0PVwiQmx1ZSBUZWFtIGdvYWxrZWVwZXIncyBhdmF0YXJcIj5cbiAgICAgICAgICAgICAgICA8aDUgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0taGVhZGluZ1wiPkdvYWxrZWVwZXI8L2g1PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtLXRleHRcIiAqbmdJZj0nYmx1ZV90ZWFtLmdvYWxrZWVwZXInPlxuICAgICAgICAgICAgICAgICAge3tibHVlX3RlYW0uZ29hbGtlZXBlci51c2VybmFtZX19XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtLXRleHQgdGV4dC1kYW5nZXJcIiAqbmdJZj1cIiFibHVlX3RlYW0gfHwgIWJsdWVfdGVhbS5nb2Fsa2VlcGVyXCI+Tm9uZTwvcD5cbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGRhdGEtdG9nZ2xlPVwibW9kYWxcIiBkYXRhLXRhcmdldD1cIiNwbGF5ZXJTZWxlY3RvclwiIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIHVzZXJwaWMtY29udGFpbmVyXCIgKGNsaWNrKT0nc2VsZWN0KGJsdWVfdGVhbSwgMSknPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwie3sgZ2V0VXNlclBpY1BsYWNlaG9sZGVyKCkgfX1cIiBjbGFzcz1cImltZy1yZXNwb25zaXZlXCIgYWx0PVwiQmx1ZSBUZWFtIGZvcndhcmQncyBhdmF0YXJcIj5cbiAgICAgICAgICAgICAgICA8aDUgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0taGVhZGluZ1wiPkZvcndhcmQ8L2g1PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtLXRleHRcIiAqbmdJZj1cImJsdWVfdGVhbS5mb3J3YXJkXCI+XG4gICAgICAgICAgICAgICAgICB7e2JsdWVfdGVhbS5mb3J3YXJkLnVzZXJuYW1lfX1cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0tdGV4dCB0ZXh0LWRhbmdlclwiICpuZ0lmPVwiIWJsdWVfdGVhbSB8fCAhYmx1ZV90ZWFtLmZvcndhcmRcIj5Ob25lPC9wPlxuICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxoND5SZWQgVGVhbTwvaDQ+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdC1ncm91cFwiPlxuICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIGRhdGEtdG9nZ2xlPVwibW9kYWxcIiBkYXRhLXRhcmdldD1cIiNwbGF5ZXJTZWxlY3RvclwiIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIHVzZXJwaWMtY29udGFpbmVyXCIgKGNsaWNrKT0nc2VsZWN0KHJlZF90ZWFtLCAwKSc+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCJ7eyBnZXRVc2VyUGljUGxhY2Vob2xkZXIoKSB9fVwiIGNsYXNzPVwiaW1nLXJlc3BvbnNpdmVcIiBhbHQ9XCJSZWQgVGVhbSBnb2Fsa2VlcGVyJ3MgYXZhdGFyXCI+XG4gICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwibGlzdC1ncm91cC1pdGVtLWhlYWRpbmdcIj5Hb2Fsa2VlcGVyPC9oNT5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbS10ZXh0XCIgKm5nSWY9XCJyZWRfdGVhbS5nb2Fsa2VlcGVyXCI+XG4gICAgICAgICAgICAgICAgICB7e3JlZF90ZWFtLmdvYWxrZWVwZXIudXNlcm5hbWV9fVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbS10ZXh0IHRleHQtZGFuZ2VyXCIgKm5nSWY9XCIhcmVkX3RlYW0gfHwgIXJlZF90ZWFtLmdvYWxrZWVwZXJcIj5Ob25lPC9wPlxuICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgZGF0YS10b2dnbGU9XCJtb2RhbFwiIGRhdGEtdGFyZ2V0PVwiI3BsYXllclNlbGVjdG9yXCIgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gdXNlcnBpYy1jb250YWluZXJcIiAoY2xpY2spPSdzZWxlY3QocmVkX3RlYW0sIDEpJz5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cInt7IGdldFVzZXJQaWNQbGFjZWhvbGRlcigpIH19XCIgY2xhc3M9XCJpbWctcmVzcG9uc2l2ZVwiIGFsdD1cIlJlZCBUZWFtIGZvcndhcmQncyBhdmF0YXJcIj5cbiAgICAgICAgICAgICAgICA8aDUgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0taGVhZGluZ1wiPkZvcndhcmQ8L2g1PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtLXRleHRcIiAqbmdJZj1cInJlZF90ZWFtLmZvcndhcmRcIj5cbiAgICAgICAgICAgICAgICAgIHt7cmVkX3RlYW0uZm9yd2FyZC51c2VybmFtZX19XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtLXRleHQgdGV4dC1kYW5nZXJcIiAqbmdJZj1cIiFyZWRfdGVhbSB8fCAhcmVkX3RlYW0uZm9yd2FyZFwiPk5vbmU8L3A+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLWJsb2NrXCJcbiAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cIiFpc1ZhbGlkVGVhbVNldHVwKClcIlxuICAgICAgICAgICAgICAoY2xpY2spPVwic3RhcnRNYXRjaCgpXCI+U3RhcnQgTWF0Y2g8L2J1dHRvbj5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYCxcbiAgICBzdHlsZXM6IFtgXG4gICAgICAudXNlcnBpYy1jb250YWluZXIge1xuICAgICAgICBtaW4taGVpZ2h0OiA2MHB4O1xuICAgICAgfVxuXG4gICAgICAudXNlcnBpYy1jb250YWluZXIgaW1nIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICByaWdodDogMTBweDtcbiAgICAgICAgd2lkdGg6IDQwcHg7XG4gICAgICAgIGhlaWdodDogNDBweDtcbiAgICAgIH1cblxuICAgICAgLmxpc3QtZ3JvdXAtaXRlbSB7XG4gICAgICAgIG91dGxpbmUtd2lkdGg6IDA7XG4gICAgICB9XG4gICAgYF0sXG4gICAgZGlyZWN0aXZlczogW1BsYXllclNlbGVjdG9yQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBOZXdHYW1lQ29tcG9uZW50IHtcbiAgICBibHVlX3RlYW06IFRlYW07XG4gICAgcmVkX3RlYW06IFRlYW07XG5cbiAgICBwcml2YXRlIHRvU2VsZWN0VGVhbTogVGVhbTtcbiAgICBwcml2YXRlIHRvU2VsZWN0UGxheWVyOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1hdGNoU2VydmljZTogTWF0Y2hTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuYmx1ZV90ZWFtID0gbmV3IFRlYW0oKTtcbiAgICAgICAgdGhpcy5yZWRfdGVhbSA9IG5ldyBUZWFtKCk7XG4gICAgfVxuXG4gICAgaXNWYWxpZFRlYW1TZXR1cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNUZWFtTm90RW1wdHkodGhpcy5ibHVlX3RlYW0pICYmIHRoaXMuaXNUZWFtTm90RW1wdHkodGhpcy5yZWRfdGVhbSlcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzVGVhbU5vdEVtcHR5KHRlYW06IFRlYW0pIHtcbiAgICAgICAgcmV0dXJuIHRlYW0gIT0gbnVsbCAmJiB0ZWFtLmlzQ29tcGxldGUoKTtcbiAgICB9XG5cbiAgICBnZXRVc2VyUGljUGxhY2Vob2xkZXIoKSB7XG4gICAgICAgIHJldHVybiBcImh0dHBzOi8vcGxhY2Vob2xkaXQuaW1naXgubmV0L350ZXh0P3R4dHNpemU9MzMmdHh0PTM1MMOXMTUwJnc9NDAmaD00MFwiO1xuICAgIH1cblxuICAgIHNlbGVjdCh0ZWFtOiBUZWFtLCBwbDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3Q6ICcgKyB0ZWFtICsgXCIsIHBsOiBcIiArIHBsKTtcbiAgICAgICAgdGhpcy50b1NlbGVjdFRlYW0gPSB0ZWFtO1xuICAgICAgICB0aGlzLnRvU2VsZWN0UGxheWVyID0gcGw7XG4gICAgfVxuXG4gICAgc2V0UGxheWVyKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRvU2VsZWN0UGxheWVyID09IDApIHtcbiAgICAgICAgICAgIHRoaXMudG9TZWxlY3RUZWFtLmdvYWxrZWVwZXIgPSBldmVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudG9TZWxlY3RUZWFtLmZvcndhcmQgPSBldmVudDtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhldmVudCk7XG4gICAgfVxuXG4gICAgc3RhcnRNYXRjaCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJzdGFydCBtYXRjaFwiKTtcbiAgICAgICAgdGhpcy5tYXRjaFNlcnZpY2VcbiAgICAgICAgICAgIC5jcmVhdGVNYXRjaCh0aGlzLmJsdWVfdGVhbSwgdGhpcy5yZWRfdGVhbSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5vbk1hdGNoU3RhcnRlZCwgdGhpcy5vbkVycm9yLCB0aGlzLm9uRXJyb3IpO1xuICAgIH1cblxuICAgIG9uTWF0Y2hTdGFydGVkKGQ6IE1hdGNoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGQpO1xuICAgIH1cblxuICAgIG9uRXJyb3IoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9